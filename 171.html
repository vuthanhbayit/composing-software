<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p171" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_171{left:110px;bottom:1103px;letter-spacing:-0.19px;word-spacing:0.02px;}
#t2_171{left:801px;bottom:1101px;letter-spacing:0.12px;}
#t3_171{left:77px;bottom:1052px;letter-spacing:-0.16px;}
#t4_171{left:127px;bottom:1051px;letter-spacing:0.12px;}
#t5_171{left:176px;bottom:1051px;letter-spacing:0.12px;}
#t6_171{left:235px;bottom:1051px;}
#t7_171{left:251px;bottom:1051px;letter-spacing:0.12px;}
#t8_171{left:309px;bottom:1051px;}
#t9_171{left:318px;bottom:1051px;letter-spacing:0.12px;}
#ta_171{left:77px;bottom:1030px;letter-spacing:-0.16px;}
#tb_171{left:127px;bottom:1029px;letter-spacing:0.12px;}
#tc_171{left:176px;bottom:1029px;letter-spacing:0.12px;}
#td_171{left:251px;bottom:1029px;}
#te_171{left:268px;bottom:1029px;letter-spacing:0.12px;}
#tf_171{left:301px;bottom:1029px;letter-spacing:8.49px;}
#tg_171{left:326px;bottom:1029px;letter-spacing:0.12px;}
#th_171{left:77px;bottom:1008px;letter-spacing:-0.16px;}
#ti_171{left:77px;bottom:986px;letter-spacing:-0.16px;}
#tj_171{left:127px;bottom:985px;letter-spacing:0.12px;}
#tk_171{left:77px;bottom:964px;letter-spacing:-0.16px;}
#tl_171{left:143px;bottom:963px;letter-spacing:0.12px;}
#tm_171{left:77px;bottom:942px;letter-spacing:-0.16px;}
#tn_171{left:143px;bottom:941px;letter-spacing:0.12px;}
#to_171{left:77px;bottom:920px;letter-spacing:-0.16px;}
#tp_171{left:143px;bottom:919px;letter-spacing:0.12px;}
#tq_171{left:77px;bottom:898px;letter-spacing:-0.16px;}
#tr_171{left:143px;bottom:897px;letter-spacing:0.12px;}
#ts_171{left:77px;bottom:876px;letter-spacing:-0.16px;}
#tt_171{left:127px;bottom:875px;letter-spacing:0.12px;}
#tu_171{left:77px;bottom:853px;letter-spacing:-0.16px;}
#tv_171{left:110px;bottom:853px;}
#tw_171{left:110px;bottom:805px;letter-spacing:0.09px;}
#tx_171{left:84px;bottom:761px;}
#ty_171{left:110px;bottom:761px;letter-spacing:0.12px;word-spacing:4.5px;}
#tz_171{left:84px;bottom:739px;}
#t10_171{left:176px;bottom:739px;letter-spacing:0.12px;word-spacing:4.49px;}
#t11_171{left:84px;bottom:717px;}
#t12_171{left:176px;bottom:716px;letter-spacing:0.12px;}
#t13_171{left:260px;bottom:716px;letter-spacing:0.12px;}
#t14_171{left:110px;bottom:669px;letter-spacing:0.1px;word-spacing:0.01px;}
#t15_171{left:128px;bottom:622px;letter-spacing:0.08px;word-spacing:1.71px;}
#t16_171{left:236px;bottom:623px;letter-spacing:0.12px;}
#t17_171{left:257px;bottom:622px;letter-spacing:0.11px;word-spacing:0.25px;}
#t18_171{left:379px;bottom:623px;letter-spacing:0.12px;}
#t19_171{left:409px;bottom:622px;letter-spacing:0.1px;word-spacing:0.25px;}
#t1a_171{left:565px;bottom:623px;letter-spacing:0.12px;word-spacing:4.96px;}
#t1b_171{left:670px;bottom:622px;letter-spacing:0.11px;}
#t1c_171{left:720px;bottom:623px;}
#t1d_171{left:733px;bottom:622px;letter-spacing:0.12px;word-spacing:0.21px;}
#t1e_171{left:148px;bottom:600px;letter-spacing:0.12px;}
#t1f_171{left:128px;bottom:578px;letter-spacing:0.04px;word-spacing:2.15px;}
#t1g_171{left:198px;bottom:579px;letter-spacing:0.12px;}
#t1h_171{left:279px;bottom:578px;letter-spacing:0.12px;word-spacing:0.97px;}
#t1i_171{left:388px;bottom:579px;}
#t1j_171{left:401px;bottom:578px;letter-spacing:0.11px;word-spacing:0.98px;}
#t1k_171{left:559px;bottom:579px;letter-spacing:0.12px;}
#t1l_171{left:606px;bottom:578px;letter-spacing:0.09px;word-spacing:1px;}
#t1m_171{left:148px;bottom:557px;letter-spacing:0.12px;}
#t1n_171{left:178px;bottom:556px;letter-spacing:0.11px;}
#t1o_171{left:315px;bottom:557px;}
#t1p_171{left:327px;bottom:556px;letter-spacing:0.1px;word-spacing:-0.01px;}
#t1q_171{left:547px;bottom:557px;letter-spacing:0.12px;}
#t1r_171{left:643px;bottom:556px;letter-spacing:0.13px;word-spacing:-0.04px;}
#t1s_171{left:128px;bottom:533px;letter-spacing:0.11px;word-spacing:0.59px;}
#t1t_171{left:342px;bottom:535px;letter-spacing:0.12px;}
#t1u_171{left:388px;bottom:533px;letter-spacing:0.11px;word-spacing:-0.02px;}
#t1v_171{left:491px;bottom:535px;letter-spacing:0.12px;}
#t1w_171{left:616px;bottom:533px;}
#t1x_171{left:110px;bottom:486px;letter-spacing:0.05px;word-spacing:0.1px;}
#t1y_171{left:84px;bottom:442px;}
#t1z_171{left:110px;bottom:442px;letter-spacing:0.12px;}
#t20_171{left:160px;bottom:442px;}
#t21_171{left:176px;bottom:442px;}
#t22_171{left:193px;bottom:442px;letter-spacing:0.12px;word-spacing:4.5px;}
#t23_171{left:84px;bottom:420px;}
#t24_171{left:127px;bottom:419px;letter-spacing:0.12px;}
#t25_171{left:176px;bottom:419px;letter-spacing:0.12px;}
#t26_171{left:210px;bottom:419px;}
#t27_171{left:226px;bottom:419px;letter-spacing:0.12px;word-spacing:4.5px;}
#t28_171{left:334px;bottom:419px;}
#t29_171{left:351px;bottom:419px;letter-spacing:0.12px;}
#t2a_171{left:84px;bottom:398px;}
#t2b_171{left:84px;bottom:376px;}
#t2c_171{left:127px;bottom:375px;letter-spacing:0.12px;}
#t2d_171{left:185px;bottom:375px;letter-spacing:0.12px;}
#t2e_171{left:235px;bottom:375px;letter-spacing:0.12px;word-spacing:4.49px;}
#t2f_171{left:84px;bottom:354px;}
#t2g_171{left:143px;bottom:353px;letter-spacing:0.12px;}
#t2h_171{left:210px;bottom:353px;}
#t2i_171{left:226px;bottom:353px;letter-spacing:0.12px;word-spacing:4.49px;}
#t2j_171{left:276px;bottom:353px;letter-spacing:0.12px;}
#t2k_171{left:301px;bottom:353px;letter-spacing:0.12px;}
#t2l_171{left:326px;bottom:353px;letter-spacing:0.12px;}
#t2m_171{left:376px;bottom:353px;}
#t2n_171{left:384px;bottom:353px;letter-spacing:0.12px;}
#t2o_171{left:401px;bottom:353px;}
#t2p_171{left:84px;bottom:332px;}
#t2q_171{left:143px;bottom:331px;letter-spacing:0.12px;}
#t2r_171{left:201px;bottom:331px;}
#t2s_171{left:218px;bottom:331px;letter-spacing:0.12px;word-spacing:4.5px;}
#t2t_171{left:84px;bottom:310px;}
#t2u_171{left:127px;bottom:309px;letter-spacing:0.12px;}
#t2v_171{left:84px;bottom:288px;}
#t2w_171{left:110px;bottom:287px;letter-spacing:0.12px;}
#t2x_171{left:110px;bottom:240px;letter-spacing:0.11px;word-spacing:-0.01px;}
#t2y_171{left:84px;bottom:196px;}
#t2z_171{left:110px;bottom:195px;letter-spacing:0.12px;word-spacing:4.5px;}
#t30_171{left:84px;bottom:173px;}
#t31_171{left:110px;bottom:173px;letter-spacing:0.12px;word-spacing:4.5px;}
#t32_171{left:110px;bottom:125px;letter-spacing:0.11px;}
#t33_171{left:350px;bottom:127px;letter-spacing:0.12px;}
#t34_171{left:379px;bottom:125px;letter-spacing:0.12px;word-spacing:-0.02px;}

.s1_171{font-size:15px;font-family:LinLibertine_1bk;color:#000;}
.s2_171{font-size:18px;font-family:LinLibertine_1bk;color:#000;}
.s3_171{font-size:14px;font-family:AnonymousPro_1br;color:#7F7F7F;}
.s4_171{font-size:15px;font-family:AnonymousPro-Bold_1by;color:#008000;}
.s5_171{font-size:15px;font-family:AnonymousPro_1br;color:#000;}
.s6_171{font-size:15px;font-family:AnonymousPro_1br;color:#666;}
.s7_171{font-size:15px;font-family:AnonymousPro_1br;color:#008000;}
.s8_171{font-size:15px;font-family:AnonymousPro_1br;color:#BA2121;}
.s9_171{font-size:15px;font-family:AnonymousPro-Bold_1by;color:#BA6687;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts171" type="text/css" >

@font-face {
	font-family: AnonymousPro-Bold_1by;
	src: url("fonts/AnonymousPro-Bold_1by.woff") format("woff");
}

@font-face {
	font-family: AnonymousPro_1br;
	src: url("fonts/AnonymousPro_1br.woff") format("woff");
}

@font-face {
	font-family: LinLibertine_1bk;
	src: url("fonts/LinLibertine_1bk.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg171Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg171" style="-webkit-user-select: none;"><object width="935" height="1210" data="171/171.svg" type="image/svg+xml" id="pdf171" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div id="t1_171" class="t s1_171">Composable Custom Data Types</div>
<div id="t2_171" class="t s2_171">164</div>
<div id="t3_171" class="t s3_171">34</div>
<div id="t4_171" class="t s4_171">const</div>
<div id="t5_171" class="t s5_171">actual</div>
<div id="t6_171" class="t s6_171">=</div>
<div id="t7_171" class="t s5_171">t(x)(t(</div>
<div id="t8_171" class="t s6_171">1</div>
<div id="t9_171" class="t s5_171">));</div>
<div id="ta_171" class="t s3_171">35</div>
<div id="tb_171" class="t s4_171">const</div>
<div id="tc_171" class="t s5_171">expected</div>
<div id="td_171" class="t s6_171">=</div>
<div id="te_171" class="t s5_171">t(x</div>
<div id="tf_171" class="t s6_171">+1</div>
<div id="tg_171" class="t s5_171">);</div>
<div id="th_171" class="t s3_171">36</div>
<div id="ti_171" class="t s3_171">37</div>
<div id="tj_171" class="t s5_171">assert({</div>
<div id="tk_171" class="t s3_171">38</div>
<div id="tl_171" class="t s5_171">given,</div>
<div id="tm_171" class="t s3_171">39</div>
<div id="tn_171" class="t s5_171">should,</div>
<div id="to_171" class="t s3_171">40</div>
<div id="tp_171" class="t s5_171">actual,</div>
<div id="tq_171" class="t s3_171">41</div>
<div id="tr_171" class="t s5_171">expected</div>
<div id="ts_171" class="t s3_171">42</div>
<div id="tt_171" class="t s5_171">});</div>
<div id="tu_171" class="t s3_171">43</div>
<div id="tv_171" class="t s5_171">}</div>
<div id="tw_171" class="t s2_171">These tests will fail at first:</div>
<div id="tx_171" class="t s3_171">1</div>
<div id="ty_171" class="t s5_171">NOT OK: a value t(x) composed with t(0) ==== t(x)</div>
<div id="tz_171" class="t s3_171">2</div>
<div id="t10_171" class="t s5_171">Expected: t(20)</div>
<div id="t11_171" class="t s3_171">3</div>
<div id="t12_171" class="t s5_171">Actual:</div>
<div id="t13_171" class="t s5_171">20</div>
<div id="t14_171" class="t s2_171">But we can make them pass with 3 simple steps:</div>
<div id="t15_171" class="t s2_171">1. Change the</div>
<div id="t16_171" class="t s5_171">fn</div>
<div id="t17_171" class="t s2_171">function into an</div>
<div id="t18_171" class="t s5_171">add</div>
<div id="t19_171" class="t s2_171">function that returns</div>
<div id="t1a_171" class="t s5_171">t(value + n)</div>
<div id="t1b_171" class="t s2_171">where</div>
<div id="t1c_171" class="t s5_171">n</div>
<div id="t1d_171" class="t s2_171">is the passed</div>
<div id="t1e_171" class="t s2_171">argument.</div>
<div id="t1f_171" class="t s2_171">2. Add a</div>
<div id="t1g_171" class="t s5_171">valueOf()</div>
<div id="t1h_171" class="t s2_171">method to the</div>
<div id="t1i_171" class="t s5_171">t</div>
<div id="t1j_171" class="t s2_171">type so that the new</div>
<div id="t1k_171" class="t s5_171">add()</div>
<div id="t1l_171" class="t s2_171">function can take instances of</div>
<div id="t1m_171" class="t s5_171">t()</div>
<div id="t1n_171" class="t s2_171">as arguments. The</div>
<div id="t1o_171" class="t s5_171">+</div>
<div id="t1p_171" class="t s2_171">operator will use the result of</div>
<div id="t1q_171" class="t s5_171">n.valueOf()</div>
<div id="t1r_171" class="t s2_171">as the second operand.</div>
<div id="t1s_171" class="t s2_171">3. Assign the methods to the</div>
<div id="t1t_171" class="t s5_171">add()</div>
<div id="t1u_171" class="t s2_171">function with</div>
<div id="t1v_171" class="t s5_171">Object.assign()</div>
<div id="t1w_171" class="t s2_171">.</div>
<div id="t1x_171" class="t s2_171">When you put it all together, it looks like this:</div>
<div id="t1y_171" class="t s3_171">1</div>
<div id="t1z_171" class="t s4_171">const</div>
<div id="t20_171" class="t s5_171">t</div>
<div id="t21_171" class="t s6_171">=</div>
<div id="t22_171" class="t s5_171">value =&gt; {</div>
<div id="t23_171" class="t s3_171">2</div>
<div id="t24_171" class="t s4_171">const</div>
<div id="t25_171" class="t s5_171">add</div>
<div id="t26_171" class="t s6_171">=</div>
<div id="t27_171" class="t s5_171">n =&gt; t(value</div>
<div id="t28_171" class="t s6_171">+</div>
<div id="t29_171" class="t s5_171">n);</div>
<div id="t2a_171" class="t s3_171">3</div>
<div id="t2b_171" class="t s3_171">4</div>
<div id="t2c_171" class="t s4_171">return</div>
<div id="t2d_171" class="t s7_171">Object</div>
<div id="t2e_171" class="t s5_171">.assign(add, {</div>
<div id="t2f_171" class="t s3_171">5</div>
<div id="t2g_171" class="t s5_171">toString</div>
<div id="t2h_171" class="t s6_171">:</div>
<div id="t2i_171" class="t s5_171">() =&gt;</div>
<div id="t2j_171" class="t s8_171">`t(</div>
<div id="t2k_171" class="t s9_171">${</div>
<div id="t2l_171" class="t s5_171">value</div>
<div id="t2m_171" class="t s9_171">}</div>
<div id="t2n_171" class="t s8_171">)`</div>
<div id="t2o_171" class="t s5_171">,</div>
<div id="t2p_171" class="t s3_171">6</div>
<div id="t2q_171" class="t s5_171">valueOf</div>
<div id="t2r_171" class="t s6_171">:</div>
<div id="t2s_171" class="t s5_171">() =&gt; value</div>
<div id="t2t_171" class="t s3_171">7</div>
<div id="t2u_171" class="t s5_171">});</div>
<div id="t2v_171" class="t s3_171">8</div>
<div id="t2w_171" class="t s5_171">};</div>
<div id="t2x_171" class="t s2_171">And then the tests pass:</div>
<div id="t2y_171" class="t s3_171">1</div>
<div id="t2z_171" class="t s8_171">"OK: a value t(x) composed with t(0) ==== t(x)"</div>
<div id="t30_171" class="t s3_171">2</div>
<div id="t31_171" class="t s8_171">"OK: a value t(x) composed with t(1) ==== t(x + 1)"</div>
<div id="t32_171" class="t s2_171">Now you can compose values of</div>
<div id="t33_171" class="t s5_171">t()</div>
<div id="t34_171" class="t s2_171">with function composition:</div>

<!-- End text definitions -->


</div>
</body>
</html>
